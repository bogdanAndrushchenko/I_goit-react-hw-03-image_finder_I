{"version":3,"sources":["Component/SearchForm/SearchForm.jsx","Component/Searchbar/Searchbar.jsx","Component/Modal/Modal.jsx","Component/ImageGalleryItem/ImageGalleryItem.jsx","Component/ImageGallery/ImageGallery.jsx","Component/Loaders/Loader/Loader.jsx","Component/Loaders/ Magnifier/ Magnifier.jsx","Component/Button/Button.jsx","API_service/api_service.js","App.js","index.js"],"names":["SearchForm","onFormSubmit","useState","searchImage","setSearchImage","resetForm","className","onSubmit","e","preventDefault","trim","toast","dark","autoClose","type","autoComplete","autoFocus","placeholder","name","value","onChange","currentTarget","toLowerCase","Searchbar","modalRoot","document","getElementById","Modal","url","alt","onClose","handleCloseModal","code","target","useEffect","window","addEventListener","removeEventListener","createPortal","onClick","src","ImageGalleryItem","images","modal","setModal","setURL","setAlt","toggleModal","map","id","webformatURL","largeImageURL","tags","dataset","source","setOptionsModal","data-source","ImageGallery","Loader","Magnifier","title","Button","onLoadMore","axios","defaults","baseURL","params","key","image_type","orientation","per_page","getResource","q","page","a","get","hits","data","error","STATUS","App","query","setQuery","setImages","setError","status","setStatus","currentPage","setCurrentPage","IDLE","PENDING","REJECTED","RESOLVED","scrollToNextPage","getAPI","then","length","catch","scrollTo","top","documentElement","scrollHeight","behavior","message","p","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.336a2bfc.chunk.js","sourcesContent":["import { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { toast } from 'react-toastify';\n\nimport './SearchForm.scss';\n\nconst SearchForm = ({ onFormSubmit }) => {\n  const [searchImage, setSearchImage] = useState('');\n\n  const handleInputChange = e => {\n    const { value } = e.currentTarget;\n    setSearchImage(value.toLowerCase());\n  };\n\n  const handleSubmitForm = e => {\n    e.preventDefault();\n    if (searchImage.trim() === '') {\n      toast.dark('Please enter request', { autoClose: 2000 });\n      return;\n    }\n    onFormSubmit(searchImage);\n    resetForm();\n  };\n\n  const resetForm = () => {\n    setSearchImage('');\n  };\n\n  return (\n    <form className=\"SearchForm\" onSubmit={handleSubmitForm}>\n      <button type=\"submit\" className=\"SearchForm-button\">\n        <span className=\"SearchForm-button-label\">Search</span>\n      </button>\n\n      <input\n        className=\"SearchForm-input\"\n        type=\"text\"\n        autoComplete=\"off\"\n        autoFocus\n        placeholder=\"Search images and photos\"\n        name=\"searchImage\"\n        value={searchImage}\n        onChange={handleInputChange}\n      />\n    </form>\n  );\n};\n\nSearchForm.propTypes = {\n  onFormSubmit: PropTypes.func.isRequired,\n};\n\nexport default SearchForm;\n","import PropTypes from 'prop-types';\n\nimport SearchForm from '../SearchForm';\n\nimport './Searchbar.scss';\n\nconst Searchbar = ({ onFormSubmit }) => {\n  return (\n    <header className=\"Searchbar\">\n      <SearchForm onFormSubmit={onFormSubmit} />\n    </header>\n  );\n};\n\nSearchbar.propTypes = {\n  onFormSubmit: PropTypes.func.isRequired,\n};\n\nexport default Searchbar;\n","import React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { createPortal } from 'react-dom';\n\nimport './Modal.scss';\n\nconst modalRoot = document.getElementById('#modal-root');\n\nconst Modal = ({ url, alt, onClose }) => {\n  const handleCloseModal = e => {\n    const { code, target, currentTarget } = e;\n    if (code === 'Escape' || currentTarget === target) {\n      onClose();\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener('keydown', handleCloseModal);\n    return () => {\n      window.removeEventListener('keydown', handleCloseModal);\n    };\n  });\n\n  return createPortal(\n    <div className=\"Overlay\" onClick={handleCloseModal}>\n      <div className=\"Modal\">\n        <img src={url} alt={alt} />\n      </div>\n    </div>,\n    modalRoot,\n  );\n};\n\nModal.propTypes = {\n  onClose: PropTypes.func.isRequired,\n};\n\nexport default Modal;\n","import { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport './ImageGalleryItem.scss';\nimport Modal from '../Modal';\n\nconst ImageGalleryItem = ({ images }) => {\n  const [modal, setModal] = useState(false);\n  const [url, setURL] = useState('');\n  const [alt, setAlt] = useState('');\n\n  const toggleModal = () => {\n    setModal(modal => !modal);\n  };\n\n  const setOptionsModal = e => {\n    const { dataset, alt } = e.target;\n\n    setURL(dataset.source);\n    setAlt(alt);\n  };\n\n  return (\n    <>\n      <ul className=\"ImageGallery\">\n        {images &&\n          images.map(({ id, webformatURL, largeImageURL, tags }) => (\n            <li\n              className=\"ImageGalleryItem\"\n              key={id}\n              onClick={e => {\n                toggleModal();\n                setOptionsModal(e);\n              }}\n            >\n              <img\n                src={webformatURL}\n                alt={tags}\n                data-source={largeImageURL}\n                className=\"ImageGalleryItem-image\"\n              />\n            </li>\n          ))}\n      </ul>\n      {modal && <Modal url={url} alt={alt} onClose={toggleModal} />}\n    </>\n  );\n};\n\nImageGalleryItem.propTypes = {\n  images: PropTypes.arrayOf(PropTypes.object).isRequired,\n};\n\nexport default ImageGalleryItem;\n","import PropTypes from 'prop-types';\n\nimport ImageGalleryItem from '../ImageGalleryItem';\n\nimport './ImageGallery.scss';\n\nconst ImageGallery = ({ images }) => {\n  return (\n    <ul>\n      <ImageGalleryItem images={images} />\n    </ul>\n  );\n};\n\nImageGallery.propTypes = {\n  images: PropTypes.arrayOf(PropTypes.object).isRequired,\n};\n\nexport default ImageGallery;\n","import './Loader.scss';\n\nconst Loader = () => {\n  return (\n    <div className=\"lds-spinner\">\n      <div />\n      <div />\n      <div />\n      <div />\n      <div />\n      <div />\n      <div />\n      <div />\n      <div />\n      <div />\n      <div />\n      <div />\n    </div>\n  );\n};\n\nexport default Loader;\n","import PropTypes from 'prop-types';\n\nimport './ Magnifier.scss';\n\nconst Magnifier = ({ title }) => {\n  return (\n    <div className=\"Magnifier\">\n      <h3>{title}</h3>\n      <div className=\"loadingio-spinner-magnify-fbxdd69ymcl\">\n        <div className=\"ldio-fccru7n993\">\n          <div>\n            <div>\n              <div />\n              <div />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nMagnifier.propTypes = {\n  title: PropTypes.string,\n};\n\nexport default Magnifier;\n","import PropTypes from 'prop-types';\n\nimport './Button.scss';\n\nconst Button = ({ onLoadMore }) => {\n  return (\n    <button type=\"button\" className=\"Button\" onClick={onLoadMore}>\n      Load more\n    </button>\n  );\n};\n\nButton.propTypes = {\n  onLoadMore: PropTypes.func.isRequired,\n};\n\nexport default Button;\n","import axios from 'axios';\nimport { toast } from 'react-toastify';\n\nconst API_KEY = '18613871-d09d7f4d1ad86f8a51a1289a6';\nconst BASE_URL = 'https://pixabay.com/api';\n\naxios.defaults.baseURL = BASE_URL;\naxios.defaults.params = {\n  key: API_KEY,\n  image_type: 'photo',\n  orientation: 'horizontal',\n  per_page: 12,\n};\n\nconst getResource = async (q, page) => {\n  try {\n    const {\n      data: { hits },\n    } = await axios.get(``, { params: { q, page } });\n    return hits;\n  } catch (error) {\n    throw toast.error(error, {\n      autoClose: 2000,\n    });\n  }\n};\n\nexport default getResource;\n","import { useEffect, useState } from 'react';\nimport { ToastContainer, toast } from 'react-toastify';\n\nimport Searchbar from './Component/Searchbar';\nimport ImageGallery from './Component/ImageGallery';\nimport { Loader, Magnifier } from './Component/Loaders';\nimport Button from './Component/Button';\n\nimport getResource from './API_service/api_service';\n\nimport './App.css';\nimport 'react-toastify/dist/ReactToastify.css';\n\nconst STATUS = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  REJECTED: 'rejected',\n  RESOLVED: 'resolved',\n};\n\nconst App = () => {\n  const [query, setQuery] = useState('');\n  const [images, setImages] = useState([]);\n  const [error, setError] = useState(null);\n  const [status, setStatus] = useState('idle');\n  const [currentPage, setCurrentPage] = useState(1);\n\n  const { IDLE, PENDING, REJECTED, RESOLVED } = STATUS;\n\n  useEffect(() => {\n    scrollToNextPage();\n  });\n\n  useEffect(() => {\n    if (query === '') {\n      return;\n    }\n    setStatus(PENDING);\n    getAPI();\n  }, [query, currentPage]);\n\n  const handleFormSubmit = searchImage => {\n    setImages([]);\n    setCurrentPage(1);\n    setQuery(searchImage);\n  };\n\n  const getAPI = () => {\n    getResource(query, currentPage)\n      .then(hits => {\n        if (hits.length === 0) {\n          toast.error('error', { autoClose: 2000 });\n          setStatus(REJECTED);\n          return;\n        }\n        setImages(images => [...images, ...hits]);\n        setStatus(RESOLVED);\n      })\n      .catch(error => {\n        setError(error);\n        setStatus(REJECTED);\n      });\n  };\n\n  const scrollToNextPage = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  };\n\n  const loadMore = () => {\n    setCurrentPage(p => p + 1);\n  };\n\n  return (\n    <div className=\"App\">\n      <Searchbar onFormSubmit={handleFormSubmit} />\n      {status === IDLE && (\n        <Magnifier title={'Введите имя картинки для поиска'} />\n      )}\n      {status === PENDING && <Loader />}\n      {status === REJECTED && (\n        <>\n          {error ? (\n            error.message\n          ) : (\n            <Magnifier title={'Ненайдено! Попробуйте еще'} />\n          )}\n        </>\n      )}\n      {status === RESOLVED && (\n        <>\n          <ImageGallery images={images} />\n          {images.length > 0 && <Button onLoadMore={loadMore} />}\n        </>\n      )}\n\n      <ToastContainer />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}